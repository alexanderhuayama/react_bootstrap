(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(30)},27:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(16),c=a.n(o),s=a(32),l=a(31),i=a(34),u=a(33),m=function(){return r.a.createElement("h1",null,"Home")},d=a(6),p=a(7),h=a(11),b=a(8),v=a(12),E=a(2),g={endPoint:"https://node-express-2018.herokuapp.com/api",userList:"/users",userRegister:"/save/user",userDetail:"/user",userUpdate:"/update/user",userDelete:"/delete/user"},f={root:"/",user:{root:"/user",add:"/add",detail:"/detail",update:"/udpate",delete:"/delete"}},y={user:{photo:"https://gravatar.com/avatar/d4a175d5894d60b5e46ca4d472d69a30?s=400&d=robohash&r=x"}},N=function(e){var t=f.user,a=t.root,n=t.detail,o=t.update;return r.a.createElement("div",{className:"col-sm-6 col-md-4 col-lg-4 col-xl-3 mb-4"},r.a.createElement("img",{src:e.photo,alt:e.name,className:"img-fluid img-thumbnail rounded"}),r.a.createElement("p",{className:"text-center h5 text-wrap"},e.name),r.a.createElement("p",{className:"text-center text-wrap text-muted"},e.email),r.a.createElement("div",{className:"col-12 text-center"},r.a.createElement(l.a,{to:"".concat(a).concat(n,"/").concat(e._id)},r.a.createElement("button",{className:"btn btn-sm btn-info"},"Detail")),"\xa0",r.a.createElement(l.a,{to:"".concat(a).concat(o,"/").concat(e._id)},r.a.createElement("button",{className:"btn btn-sm btn-secondary"},"Update")),"\xa0",r.a.createElement("button",{className:"btn btn-sm btn-danger",onClick:function(){return e.deleteUser(e._id)}},"Delete")))},U=function(e){return r.a.createElement("div",{className:"row"},e.users.map(function(t,a){return r.a.createElement(N,{index:a+1,key:t._id,_id:t._id,name:t.name,email:t.email,photo:t.photo,deleteUser:e.deleteUser})}))},j=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).state={users:[]},a.loadUsers=a.loadUsers.bind(Object(E.a)(Object(E.a)(a))),a.deleteUser=a.deleteUser.bind(Object(E.a)(Object(E.a)(a))),a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){this.loadUsers()}},{key:"loadUsers",value:function(){var e=this,t=g,a=t.endPoint,n=t.userList,r="".concat(a).concat(n);fetch(r).then(function(e){return e.json()}).then(function(t){e.setState({users:t})}).catch(console.log)}},{key:"deleteUser",value:function(e){var t=this,a=g,n=a.endPoint,r=a.userDelete;fetch("".concat(n).concat(r,"/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(e){t.loadUsers()}).catch(console.log)}},{key:"render",value:function(){var e=f.user,t=e.root,a=e.add;return r.a.createElement("div",null,r.a.createElement("h2",{className:"m-4"},"List Users"),r.a.createElement(l.a,{to:"".concat(t).concat(a)},r.a.createElement("button",{className:"btn btn-primary mb-4"},"Register User")),r.a.createElement(U,{users:this.state.users,deleteUser:this.deleteUser}))}}]),t}(n.Component),O=a(17),x=a(14);function k(e){try{return new URL(e),!0}catch(t){return!1}}var w=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(h.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(r)))).handleChangePhoto=a.handleChangePhoto.bind(Object(E.a)(Object(E.a)(a))),a.saveUser=a.saveUser.bind(Object(E.a)(Object(E.a)(a))),a.getUser=a.getUser.bind(Object(E.a)(Object(E.a)(a))),a.formToJson=a.formToJson.bind(Object(E.a)(Object(E.a)(a))),a.registerUser=a.registerUser.bind(Object(E.a)(Object(E.a)(a))),a.updateUser=a.updateUser.bind(Object(E.a)(Object(E.a)(a))),a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"handleChangePhoto",value:function(e){var t=e.target.value;k(t)?document.getElementById("user-profile-photo").setAttribute("src",t):""===t.trim()&&document.getElementById("user-profile-photo").setAttribute("src",y.user.photo)}},{key:"saveUser",value:function(e){e.preventDefault();var t=this.props.match.url,a=f.user,n=a.add,r=a.update;t.includes(n)?this.registerUser(e):t.includes(r)&&this.updateUser(e)}},{key:"registerUser",value:function(e){var t=this,a=g,n=a.endPoint,r=a.userRegister,o=this.formToJson(e.target),c=!1;o.photo=k(o.photo)?o.photo:y.user.photo,fetch("".concat(n).concat(r,"/").concat(o.id),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(function(e){return e.ok&&(c=!0),e.json()}).then(function(e){c?t.props.history.push(f.user.root):console.log("ERROR_RESPONSE",e.message)}).catch(console.log)}},{key:"updateUser",value:function(e){var t=this,a=g,n=a.endPoint,r=a.userUpdate,o=this.formToJson(e.target),c=!1;fetch("".concat(n).concat(r,"/").concat(o.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}).then(function(e){return e.ok&&(c=!0),e.json()}).then(function(e){c?t.props.history.push(f.user.root):console.log("ERROR_RESPONSE",e.message)}).catch(console.log)}},{key:"formToJson",value:function(e){var t={};return Object(x.a)(e.getElementsByTagName("input")).forEach(function(e){Object.assign(t,Object(O.a)({},e.getAttribute("id").replace("user-",""),e.value))}),t}},{key:"componentDidMount",value:function(){this.getUser()}},{key:"getUser",value:function(){var e=this.props.match,t=e.url,a=e.params,n=g,r=n.endPoint,o=n.userDetail,c=f.user,s=c.add,l=c.detail,i=c.update,u=document.getElementById("form-user");if(t.includes(s)){u.querySelector("legend").textContent="Register user";var m=document.getElementById("btn-save-user");m.classList.remove("d-none"),m.textContent="Register"}else{if(t.includes(i)){u.querySelector("legend").textContent="Update user";var d=document.getElementById("btn-save-user");d.classList.remove("d-none"),d.textContent="Update"}else t.includes(l)&&(u.querySelector("legend").textContent="Detail user",Object(x.a)(u.getElementsByTagName("input")).forEach(function(e){e.readOnly=!0}));fetch("".concat(r).concat(o,"/").concat(a.id)).then(function(e){return e.json()}).then(function(e){u["user-id"].value=e._id,u["user-name"].value=e.name,u["user-email"].value=e.email,u["user-photo"].value=e.photo,u.querySelector("#user-profile-photo").setAttribute("src",e.photo)}).catch(console.log)}}},{key:"render",value:function(){var e=y.user.photo,t=f.user.root;return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.saveUser,id:"form-user"},r.a.createElement("fieldset",null,r.a.createElement("legend",{className:"h2 m-4"}),r.a.createElement("input",{type:"hidden",id:"user-id"}),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm-6 col-lg-8"},r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"user-name"},"Name"),r.a.createElement("input",{className:"form-control",placeholder:"Name",id:"user-name",autoFocus:!0})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"user-email"},"Email"),r.a.createElement("input",{type:"email",className:"form-control",placeholder:"Email",id:"user-email"})),r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"user-photo"},"Photo"),r.a.createElement("input",{type:"url",className:"form-control",placeholder:"Photo",id:"user-photo",onChange:this.handleChangePhoto}))),r.a.createElement("div",{className:"col-sm-6 col-lg-4"},r.a.createElement("img",{src:e,className:"img-fluid img-thumbnail rounded",id:"user-profile-photo",alt:"User-profile"})),r.a.createElement("div",{className:"col-sm-6 col-lg-8"},r.a.createElement("div",{className:"form-group mt-4"},r.a.createElement(l.a,{to:t},r.a.createElement("button",{className:"btn btn-primary"},"Show users")),"\xa0",r.a.createElement("button",{type:"submit",className:"btn btn-success d-none",id:"btn-save-user"},"Register")))))))}}]),t}(n.Component),C=(a(27),function(){var e=f,t=e.root,a=e.user;return r.a.createElement(s.a,null,r.a.createElement("div",null,r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement(l.a,{to:t,className:"navbar-brand"},"Dashboard"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},r.a.createElement("ul",{className:"navbar-nav ml-auto"},r.a.createElement("li",{className:"nav-item active"},r.a.createElement(l.a,{to:t,className:"nav-link"},"Home ",r.a.createElement("span",{className:"sr-only"},"(current)"))),r.a.createElement("li",{className:"nav-item dropdown"},r.a.createElement("span",{id:"navbarDropdown",className:"nav-link dropdown-toggle",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},"Maintenance"),r.a.createElement("div",{className:"dropdown-menu dropdown-menu-right","aria-labelledby":"navbarDropdown"},r.a.createElement(l.a,{to:a.root,className:"dropdown-item"},"User")))))),r.a.createElement("main",{className:"container"},r.a.createElement(i.a,null,r.a.createElement(u.a,{path:t,exact:!0,component:m}),r.a.createElement(u.a,{path:a.root,exact:!0,component:j}),r.a.createElement(u.a,{path:"".concat(a.root).concat(a.add),exact:!0,component:w}),r.a.createElement(u.a,{path:"".concat(a.root).concat(a.update,"/:id"),exact:!0,component:w}),r.a.createElement(u.a,{path:"".concat(a.root).concat(a.detail,"/:id"),exact:!0,component:w})))))});c.a.render(r.a.createElement(C,null),document.getElementById("root"))}},[[19,2,1]]]);
//# sourceMappingURL=main.1bb489ce.chunk.js.map